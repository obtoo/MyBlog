---
title: 移动端 H5 自适应
date: 2021-04-13 19:48:29
tags: 
  - vue
  - 移动端
permalink: /pages/c851d5/
categories: 
  - vue
---

## 全局禁止放缩

```html
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
```

### 什么是 meta？
::: cardList 2
```yaml
- name: 查看 meta 文档 
  desc: ''
  link: https://drafts.csswg.org/css-device-adapt/#viewport-meta
  bgColor: '#CBEAFA'
  textColor: '#2A3344'
```
:::

### viewport 属性介绍
| 属性名 |含义 |取值范围|
| --- |--- |---|
| width |宽度||
| height |高度  ||
| initial-scale |设备宽度与视图大小比率  ||
| minimum-scale |最小缩放  ||
| maximum-scale |最大缩放  ||
| user-scalable |是否允许放大网页  |no / yes|


## 插件全局自适应

### 使用的插件
::: cardList 3
```yaml
- name: amfe-flexible
  desc: ''
  link: https://www.npmjs.com/package/amfe-flexible
  bgColor: '#CBEAFA'
  textColor: '#2A3344'
- name: postcss-px2rem-exclude
  desc: ''
  link: https://www.npmjs.com/package/postcss-px2rem-exclude
  bgColor: '#CBEAFA'
  textColor: '#2A3344'
```
:::

### 作用
+ `amfe-flexible` 是配置可伸缩布局方案，主要是将 `1rem` 设为`viewWidth/10`。
+ `postcss-px2rem-exclude` 用于将像素生成 `rem`

### 为什么不用 postcss-px2rem
+ 增加了 `exclude` 属性，可以排除影响 `node_modules` 以及部分自定义的样式组件，使得诸如`vant`，`elementUI`等样式库不会被同步修改


## 配置 vue.config.js

```js
module.exports = {
  css: {
    loaderOptions: {
      // 移动端自适应配置
      postcss: {
        plugins: [
          require("postcss-px2rem-exclude")({
            // 设计图为750，如果设计与为375，则改为37.5
            remUnit: 75, 
            // 排除的样式库或者自定义样式
            exclude: '/node_modules/'  
          })
        ]
      }
    }
  }
}
```


## main.js 引入相关资源

```js
import 'amfe-flexible/index.js'
```