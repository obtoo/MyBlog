---
title: less 相关的处理
date: 2021-01-03 17:50:41
permalink: /pages/dd56ac/
categories: 
  - 开发经验
tags: 
  - 开发经验
---
## vue 安装报错

### packeage.json 安装依赖
<code-group>
  <code-block title="yarn 安装" active>
  ```bash
    yarn add less -D
    yarn add less-loader -D
  ```
  </code-block>

  <code-block title="npm 安装">
  ```bash
    npm install less -D
    npm install less-loader -D
  ```
  </code-block>
</code-group>

### 运行结果  
:::danger 报错：
`TypeError: this.getOptions is not a function`
:::

### 原因  
  `less-loader` 高版本配置变了，安装低版本 `less-loader`

### 解决方法  
<code-group>
  <code-block title="yarn 安装" active>
  ```bash
    yarn add less-loader@7.3.0 -D
  ```
  </code-block>

  <code-block title="npm 安装">
  ```bash
    npm install less-loader@7.3.0 -D
  ```
  </code-block>
</code-group>


## 项目全局使用 less 变量

### package.json 安装依赖
<code-group>
  <code-block title="yarn 安装" active>
  ```bash
    yarn add style-resources-loader -D
    yarn add vue-cli-plugin-style-resources-loader -D
  ```
  </code-block>

  <code-block title="npm 安装">
  ```bash
    npm install style-resources-loader -D
    npm install vue-cli-plugin-style-resources-loader -D
  ```
  </code-block>
</code-group>

### vue.config.js 编写配置项  
```js
const path = require('path')
const vueConfig = {
  pluginOptions: {
    // 全局引入 less 变量配置
    'style-resources-loader': {
      preProcessor: 'less',
      // 配置变量资源的路径
      patterns: [path.resolve(__dirname, 'src/styles/global.less')]
    }
  }
}
module.exports = vueConfig
```